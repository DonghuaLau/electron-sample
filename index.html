<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Electron Sample</title>
    <!--<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>-->
	<!--<script>window.$ = window.jQuery = require('jquery');</script>-->
    <script type="text/javascript" src="js/load.js"></script>
    <!--<script type="text/javascript" src="main.js"></script>-->
    <script type="text/javascript" src="lib/semantic-ui/semantic.min.js"></script>
    <link rel='stylesheet' id='crayon-theme-turnwall-css' href='lib/semantic-ui/semantic.min.css' type='text/css' media='all' />
  </head>
  <body>
    <h1>Electron Sample</h1>
	<p>
    We are using node <script>document.write(process.versions.node)</script>,
    Chrome <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>.
	</p>

	<button class="ui button" id="btn-imap">button 1</button>
	<a class="ui button" href="imap.html">button</button>

<script>

function test_imap()
{

	console.log("test imap");

	var Imap = require('imap'),
	    inspect = require('util').inspect;
	
	var imap = new Imap({
	  user: '519916178@qq.com',
	  //password: 'HUA9537PX',
	  //password: 'kguljkwkjpgobjij',
	  password: 'tyiojgpjfhurbhhb',
	  host: 'imap.qq.com',
	  port: 993,
	  tls: true
	});
	
	/*
	var imap = new Imap({
	  user: 'laudonghua@gmail.com',
	  password: 'dong9537hua',
	  host: 'imap.gmail.com',
	  port: 993,
	  tls: true
	});
	*/

	/*
	var imap = new Imap({
	  user: 'hua_zhixing@163.com',
	  password: 'px9537hua',
	  host: 'imap.163.com',
	  port: 993,
	  tls: true
	});
	*/

	function openInbox(cb) {
	  imap.openBox('INBOX', true, cb);
	}
	
	imap.once('ready', function() {
		console.log('imap ready');
	});
	
	imap.once('error', function(err) {
	  console.log("imap error");
	  console.dir(err);
	});
	
	imap.once('end', function() {
	  console.log('Connection ended');
	});
	

 //try {
	imap.connect();
	console.log('imap connect');
  //} catch (ex) {
  //  //callback(ex);
  //  console.dir(ex);
  //  alert('exception');
  //}
	
}

const contextBtn = document.getElementById('btn-imap')
contextBtn.addEventListener('click', function () {
	test_imap();
});

</script>

  </body>
</html>
